<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    java8新特性 lambda表达式 |
    
    Kevin&#39;s blog</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="outer">
  <article id="post-java8新特性-lambda表达式" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      java8新特性 lambda表达式
    </h1>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/08/06/java8新特性-lambda表达式/" class="article-date">
  <time datetime="2019-08-06T10:29:06.000Z" itemprop="datePublished">2019-08-06</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>lambda表达式是java8新引入的一个新的新特性，类似于js中的闭包，目的就是提供一个类似函数式编程的语法来简化我们的编码</p>
<h2 id="一，lambda基本语法"><a href="#一，lambda基本语法" class="headerlink" title="一，lambda基本语法"></a>一，lambda基本语法</h2><p>其实lambda表达式跟原来写一个方法思路是很相似的，只是，lambda表达式可以使我们原来的方法简单化编码，更加清晰明了</p>
<p>基本结构：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(方法参数) -&gt; 方法体</span></span><br><span class="line">(args)-&gt;body</span><br></pre></td></tr></table></figure>

<p>常见的基本写法可以有：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 1. 参数类型可推导时，不需要指定类型，如 (a) -&gt; System.out.println(a)</span></span><br><span class="line"><span class="comment">* 2. 当只有一个参数且类型可推导时，不强制写 (), 如 a -&gt; System.out.println(a)</span></span><br><span class="line"><span class="comment">* 3. 参数指定类型时，必须有括号，如 (int a) -&gt; System.out.println(a)</span></span><br><span class="line"><span class="comment">* 4. 参数可以为空，如 () -&gt; System.out.println(“hello”)</span></span><br><span class="line"><span class="comment">* 5. body 需要用 &#123;&#125; 包含语句，当只有一条语句时 &#123;&#125; 可省略</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">(a) -&gt; a * a</span><br><span class="line">(<span class="keyword">int</span> a, <span class="keyword">int</span> b) -&gt; a + b</span><br><span class="line">(a, b) -&gt; &#123;<span class="keyword">return</span> a - b;&#125;</span><br><span class="line">() -&gt; System.out.println(Thread.currentThread().getId())</span><br></pre></td></tr></table></figure>

<h2 id="二，函数式接口"><a href="#二，函数式接口" class="headerlink" title="二，函数式接口"></a>二，函数式接口</h2><p>java中的lambda表达式是以函数式接口为基础的</p>
<p><strong>什么是函数式接口？</strong></p>
<p>函数式接口（FunctionalInterface)就是只有一个方法的接口，这类接口的目的就是进行单一操作，这些函数式接口一般都带有注解@FunctionalInterface </p>
<p>EG:</p>
<p>平时我们创建线程使用的Runnable接口就是一个函数式接口</p>
<p>原始创建线程的方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"没有使用lambda表达式"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接下来我们使用lambda表达式创建线程：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(()-&gt;System.out.println(<span class="string">"使用lambda表达式创建线程"</span>)).start();</span><br></pre></td></tr></table></figure>

<p>是不是更加简单清晰了</p>
<p>注意看Thread的参数，原来我们需要传一个Runable实现类或者以匿名内部类的方法编写，但是现在，我们可以使用lambda表达式来作为函数参数，由此可见，Lambda 允许把函数作为一个方法的参数（函数作为参数传递进方法中）</p>
<p>之前我们写过一个按jsonArray某字段进行排序的一个方法，但是这个方法中的比较器是使用传统方式编写的，现在我们来用lambda试着简化一下：</p>
<p>原函数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对json数组排序，</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> jsonArr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sortKey 排序关键字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> is_desc is_desc-false升序列  is_desc-true降序 (排序字段为字符串)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">jsonArraySort</span><span class="params">(JSONArray jsonArr, String sortKey, <span class="keyword">boolean</span> is_desc)</span> </span>&#123;</span><br><span class="line">    JSONArray sortedJsonArray = <span class="keyword">new</span> JSONArray();</span><br><span class="line">    List&lt;JSONObject&gt; jsonValues = <span class="keyword">new</span> ArrayList&lt;JSONObject&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jsonArr.size(); i++) &#123;</span><br><span class="line">        jsonValues.add(JSONObject.parseObject(String.valueOf(jsonArr.getJSONObject(i))));</span><br><span class="line">    &#125;</span><br><span class="line">    Collections.sort(jsonValues, <span class="keyword">new</span> Comparator&lt;JSONObject&gt;() &#123;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span> String KEY_NAME = sortKey;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(JSONObject a, JSONObject b)</span> </span>&#123;</span><br><span class="line">            String valA = <span class="keyword">new</span> String();</span><br><span class="line">            String valB = <span class="keyword">new</span> String();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                valA = a.getString(KEY_NAME);</span><br><span class="line">                valB = b.getString(KEY_NAME);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (is_desc)&#123;</span><br><span class="line">                <span class="keyword">return</span> -valA.compareTo(valB);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> -valB.compareTo(valA);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; jsonArr.size(); i++) &#123;</span><br><span class="line">        sortedJsonArray.add(jsonValues.get(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sortedJsonArray.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用lambda表达式简化代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对json数组排序，</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> jsonArr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sortKey 排序关键字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> is_desc is_desc-false升序列  is_desc-true降序 (排序字段为字符串)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">jsonArraySort</span><span class="params">(JSONArray jsonArr, String sortKey, <span class="keyword">boolean</span> is_desc)</span> </span>&#123;</span><br><span class="line">    JSONArray sortedJsonArray = <span class="keyword">new</span> JSONArray();</span><br><span class="line">    List&lt;JSONObject&gt; jsonValues = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    jsonArr.forEach(a-&gt;jsonValues.add(JSONObject.parseObject(String.valueOf(a))));</span><br><span class="line">    Collections.sort(jsonValues,(JSONObject a, JSONObject b)-&gt;&#123;</span><br><span class="line">        <span class="keyword">final</span> String KEY_NAME = sortKey;</span><br><span class="line">        String valA = a.getString(KEY_NAME);</span><br><span class="line">        String valB = b.getString(KEY_NAME);</span><br><span class="line">        <span class="keyword">if</span>(is_desc)&#123;</span><br><span class="line">            <span class="keyword">return</span> -valA.compareTo(valB);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> valA.compareTo(valB);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    jsonArr.forEach(a -&gt; sortedJsonArray.add(a));</span><br><span class="line">    <span class="keyword">return</span> sortedJsonArray.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JDK中的函数式接口<br>为了现有的类库能够直接使用 Lambda 表达式，Java 8 以前存在一些接口已经被标注为函数式接口的：</p>
<ul>
<li>java.lang.Runnable</li>
<li>java.util.Comparator</li>
<li>java.util.concurrent.Callable</li>
<li>java.io.FileFilter</li>
<li>java.security.PrivilegedAction</li>
<li>java.beans.PropertyChangeListener</li>
</ul>
<p>Java 8 中更是新增加了一个包 java.util.function，带来了常用的函数式接口：</p>
<ul>
<li>Function&lt;T, R&gt; - 函数：输入 T 输出 R</li>
<li>BiFunction&lt;T, U, R&gt; - 函数：输入 T 和 U 输出 R 对象</li>
<li>Predicate<t> - 断言/判断：输入 T 输出 boolean</t></li>
<li>BiPredicate&lt;T, U&gt; - 断言/判断：输入 T 和 U 输出 boolean</li>
<li>Supplier<t> - 生产者：无输入，输出 T</t></li>
<li>Consumer<t> - 消费者：输入 T，无输出</t></li>
<li>BiConsumer&lt;T, U&gt; - 消费者：输入 T 和 U 无输出</li>
<li>UnaryOperator<t> - 单元运算：输入 T 输出 T</t></li>
<li>BinaryOperator<t> - 二元运算：输入 T 和 T 输出 T</t></li>
</ul>
<p>另外还对基本类型的处理增加了更加具体的函数是接口，包括：BooleanSupplier, DoubleBinaryOperator, DoubleConsumer, DoubleFunction<r>, DoublePredicate, DoubleSupplier, DoubleToIntFunction, DoubleToLongFunction, DoubleUnaryOperator, IntBinaryOperator, IntConsumer, IntFunction<r>, IntPredicate, IntSupplier, IntToDoubleFunction, IntToLongFunction, IntUnaryOperator, LongBinaryOperator, LongConsumer, LongFunction<r>, LongPredicate, LongSupplier, LongToDoubleFunction, LongToIntFunction, LongUnaryOperator, ToDoubleBiFunction&lt;T, U&gt;, ToDoubleFunction<t>, ToIntBiFunction&lt;T, U&gt;, ToIntFunction<t>, ToLongBiFunction&lt;T, U&gt;, ToLongFunction<t> 。结合上面的函数式接口，对这些基本类型的函数式接口通过类名就能一眼看出接口的作用</t></t></t></r></r></r></p>
<p>纵观上述函数式接口，其实可以分为四大类：</p>
<ul>
<li>消费型（有参数，无返回值）</li>
<li>生成型（无参数，有返回值）</li>
<li>一般型（参数，返回值都有）</li>
<li>断言型（输出布尔型）</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kevin091827.github.io/2019/08/06/java8新特性-lambda表达式/" data-id="cjz54ryes0004kwu3mcdhw157"
         class="article-share-link">Share</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java基础/">java基础</a></li></ul>

    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/08/06/java8-stream/" class="article-nav-link">
        <strong class="article-nav-caption">Newer posts</strong>
        <div class="article-nav-title">
          
            java8 stream
          
        </div>
      </a>
    
    
      <a href="/2019/08/06/jwt认证实践/" class="article-nav-link">
        <strong class="article-nav-caption">Olde posts</strong>
        <div class="article-nav-title">jwt认证实践</div>
      </a>
    
  </nav>


  

  
    
  

</article>



</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2019 Kevin&#39;s blog</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="Kevin&#39;s blog"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/snap.svg-min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/ocean.js"></script>

</body>
</html>